import { graphql } from 'gatsby';

import { Text, ProjectCard, Box } from '../components';
import DefaultLayout from '../layouts/DefaultLayout';

<Box display="flex" flexWrap="wrap" mx={-3}>
  {props.data.allYamlPage.nodes[0].contents.map((project) => (
    <Box p={3} width={[1, 1, 1 / 2]} key={project.name}>
      <ProjectCard project={project} />
    </Box>
  ))}
</Box>

export const pageQuery = graphql`
  query {
    allYamlPage(filter: { pageType: { eq: "Projects" } }) {
      nodes {
        metaDescription
        pageType
        title
        contents {
          ... on Project {
            name
            description
            url
            githubRepo
          }
        }
      }
    }
  }
`;

export default function Projects({ children, data }) {
  const pageData = data.allYamlPage.nodes[0] || {};
  return (
    <DefaultLayout
      title={pageData.title}
      description={pageData.metaDescription}
      url="/projects/"
    >
      {children}
    </DefaultLayout>
  );
}
