{"version":3,"sources":["../../../src/redux/reducers/node-manifest.ts"],"names":["nodeManifestReducer","state","action","type","manifestId","pluginName","node","payload","reporter","warn","id","push"],"mappings":";;;;;;;AAAA;;AAQO,MAAMA,mBAAmB,GAAG,CACjCC,KAAoC,GAAG,EADN,EAEjCC,MAFiC,KAGC;AAClC,UAAQA,MAAM,CAACC,IAAf;AACE,SAAM,sBAAN;AAA6B;AAC3B,cAAM;AAAEC,UAAAA,UAAF;AAAcC,UAAAA,UAAd;AAA0BC,UAAAA;AAA1B,YAAmCJ,MAAM,CAACK,OAAhD;;AAEA,YAAI,OAAOH,UAAP,KAAuB,QAA3B,EAAoC;AAClCI,4BAASC,IAAT,CACG,UAASJ,UAAW,4EADvB;;AAIA,iBAAOJ,KAAP;AACD;;AAED,YAAI,EAACK,IAAD,aAACA,IAAD,eAACA,IAAI,CAAEI,EAAP,CAAJ,EAAe;AACbF,4BAASC,IAAT,CACG,UAASJ,UAAW,gEADvB;;AAIA,iBAAOJ,KAAP;AACD;;AAEDA,QAAAA,KAAK,CAACU,IAAN,CAAW,EACT,GAAGT,MAAM,CAACK,OADD;AAETD,UAAAA,IAAI,EAAE;AACJI,YAAAA,EAAE,EAAEJ,IAAI,CAACI;AADL;AAFG,SAAX;AAOA,eAAOT,KAAP;AACD;;AAED,SAAM,uBAAN;AAA8B;AAC5BA,QAAAA,KAAK,GAAG,EAAR;AAEA,eAAOA,KAAP;AACD;;AAED;AACE,aAAOA,KAAP;AArCJ;AAuCD,CA3CM","sourcesContent":["import reporter from \"gatsby-cli/lib/reporter\"\n\nimport {\n  IGatsbyState,\n  ICreateNodeManifest,\n  IDeleteNodeManifests,\n} from \"../types\"\n\nexport const nodeManifestReducer = (\n  state: IGatsbyState[\"nodeManifests\"] = [],\n  action: ICreateNodeManifest | IDeleteNodeManifests\n): IGatsbyState[\"nodeManifests\"] => {\n  switch (action.type) {\n    case `CREATE_NODE_MANIFEST`: {\n      const { manifestId, pluginName, node } = action.payload\n\n      if (typeof manifestId !== `string`) {\n        reporter.warn(\n          `Plugin ${pluginName} called unstable_createNodeManifest with a manifestId that isn't a string.`\n        )\n\n        return state\n      }\n\n      if (!node?.id) {\n        reporter.warn(\n          `Plugin ${pluginName} called unstable_createNodeManifest but didn't provide a node.`\n        )\n\n        return state\n      }\n\n      state.push({\n        ...action.payload,\n        node: {\n          id: node.id,\n        },\n      })\n\n      return state\n    }\n\n    case `DELETE_NODE_MANIFESTS`: {\n      state = []\n\n      return state\n    }\n\n    default:\n      return state\n  }\n}\n"],"file":"node-manifest.js"}