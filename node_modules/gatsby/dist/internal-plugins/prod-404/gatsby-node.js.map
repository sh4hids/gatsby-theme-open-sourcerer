{"version":3,"sources":["../../../src/internal-plugins/prod-404/gatsby-node.js"],"names":["emitter","store","require","actions","PROD_404_PAGE_PATH","page404","on","action","test","payload","path","component","context","dispatch","createPage","plugin","deletePage"],"mappings":";;AAAA,MAAM;AAAEA,EAAAA,OAAF;AAAWC,EAAAA;AAAX,IAAqBC,OAAO,CAAE,aAAF,CAAlC;;AACA,MAAM;AAAEC,EAAAA;AAAF,IAAcD,OAAO,CAAE,qBAAF,CAA3B;;AAEA,MAAME,kBAAkB,GAAI,WAA5B;AAEA,IAAIC,OAAO,GAAG,IAAd;AACAL,OAAO,CAACM,EAAR,CAAY,aAAZ,EAA0BC,MAAM,IAAI;AAClC;AACA;AACA;AACA,MAAI,CAACF,OAAD,IAAY,cAAcG,IAAd,CAAmBD,MAAM,CAACE,OAAP,CAAeC,IAAlC,CAAhB,EAAyD;AACvDL,IAAAA,OAAO,GAAG;AACRK,MAAAA,IAAI,EAAEH,MAAM,CAACE,OAAP,CAAeC,IADb;AAERC,MAAAA,SAAS,EAAEJ,MAAM,CAACE,OAAP,CAAeE,SAFlB;AAGRC,MAAAA,OAAO,EAAEL,MAAM,CAACE,OAAP,CAAeG;AAHhB,KAAV;AAKAX,IAAAA,KAAK,CAACY,QAAN,CACEV,OAAO,CAACW,UAAR,CACE,EACE,GAAGT,OADL;AAEEK,MAAAA,IAAI,EAAEN;AAFR,KADF,EAKEG,MAAM,CAACQ,MALT,CADF;AASD;AACF,CApBD;AAsBAf,OAAO,CAACM,EAAR,CAAY,aAAZ,EAA0BC,MAAM,IAAI;AAClC,MAAIF,OAAO,IAAIE,MAAM,CAACE,OAAP,CAAeC,IAAf,KAAwBL,OAAO,CAACK,IAA/C,EAAqD;AACnDT,IAAAA,KAAK,CAACY,QAAN,CACEV,OAAO,CAACa,UAAR,CAAmB,EACjB,GAAGX,OADc;AAEjBK,MAAAA,IAAI,EAAEN;AAFW,KAAnB,CADF;AAMAC,IAAAA,OAAO,GAAG,IAAV;AACD;AACF,CAVD","sourcesContent":["const { emitter, store } = require(`../../redux`)\nconst { actions } = require(`../../redux/actions`)\n\nconst PROD_404_PAGE_PATH = `/404.html`\n\nlet page404 = null\nemitter.on(`CREATE_PAGE`, action => {\n  // Copy /404/ to /404.html as many static site hosts expect\n  // site 404 pages to be named this.\n  // https://www.gatsbyjs.org/docs/how-to/adding-common-features/add-404-page/\n  if (!page404 && /^\\/?404\\/?$/.test(action.payload.path)) {\n    page404 = {\n      path: action.payload.path,\n      component: action.payload.component,\n      context: action.payload.context,\n    }\n    store.dispatch(\n      actions.createPage(\n        {\n          ...page404,\n          path: PROD_404_PAGE_PATH,\n        },\n        action.plugin\n      )\n    )\n  }\n})\n\nemitter.on(`DELETE_PAGE`, action => {\n  if (page404 && action.payload.path === page404.path) {\n    store.dispatch(\n      actions.deletePage({\n        ...page404,\n        path: PROD_404_PAGE_PATH,\n      })\n    )\n    page404 = null\n  }\n})\n"],"file":"gatsby-node.js"}